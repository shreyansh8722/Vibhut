import{c as y,r as l,a as N,b as k,j as e,o as C,s as L,p as u,q as A,G as S,t as z,i as E,e as P,h as M,v as g}from"./index-fYIJ22hC.js";import{A as G}from"./arrow-left-C7VSTNop.js";import{m as i}from"./proxy-Cxc5Icpb.js";import{A as I}from"./index-BJlB8vhG.js";import{M as R}from"./mail-caHts6W3.js";/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],B=y("circle-alert",q);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],W=y("lock",F),_=()=>e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:[e.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l8.06 6.21C12.06 13.52 17.53 9.5 24 9.5z"}),e.jsx("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),e.jsx("path",{fill:"#FBBC05",d:"M10.6 28.71c-.48-1.45-.76-2.99-.76-4.6s.27-3.14.76-4.6l-8.06-6.21C.96 16.07 0 20.01 0 24s.96 7.93 2.56 11.11l8.04-6.4z"}),e.jsx("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.47 0-11.94-4.02-13.9-9.42l-8.06 6.21C6.51 42.62 14.62 48 24 48z"}),e.jsx("path",{fill:"none",d:"M0 0h48v48H0z"})]});function $(){const[t,f]=l.useState(!0),[n,b]=l.useState(""),[c,w]=l.useState(""),[m,r]=l.useState(null),[p,x]=l.useState(!1),o=N(),{user:d}=k();l.useEffect(()=>{d&&o("/profile",{replace:!0})},[d,o]);const h=async a=>{const s=E(P,"users",a.uid);(await M(s)).exists()?(await g(s,{displayName:a.displayName,photoURL:a.photoURL},{merge:!0}),console.log("User profile already exists for:",a.email)):(await g(s,{uid:a.uid,email:a.email,displayName:a.displayName,photoURL:a.photoURL,favorites:[]}),console.log("Created user profile for:",a.email))},j=async a=>{a.preventDefault(),x(!0),r(null);try{let s;t?s=await L(u,n,c):(s=await A(u,n,c),await h(s.user)),o("/profile",{replace:!0})}catch(s){r(s.message.replace("Firebase: ",""))}finally{x(!1)}},v=async()=>{const a=new S;r(null);try{const s=await z(u,a);await h(s.user),o("/profile",{replace:!0})}catch(s){r(s.message.replace("Firebase: ",""))}};return d?null:e.jsxs("div",{className:"flex flex-col justify-center min-h-screen bg-gray-50 p-6",children:[e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("button",{onClick:()=>o(-1),className:"p-2 rounded-full hover:bg-gray-200 transition-colors","aria-label":"Go back",children:e.jsx(G,{size:20,className:"text-gray-700"})})}),e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"w-full max-w-md mx-auto p-8 space-y-6 bg-white shadow-xl rounded-2xl border border-gray-100",children:[e.jsx("h1",{className:"text-3xl font-bold text-center text-gray-900",children:t?"Welcome Back!":"Create your Account"}),e.jsx(I,{children:m&&e.jsxs(i.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center gap-2 text-red-600 text-sm bg-red-50 p-3 rounded-lg border border-red-200",children:[e.jsx(B,{size:16}),m]})}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(R,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"email",value:n,onChange:a=>b(a.target.value),required:!0,placeholder:"Email address",className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent text-sm","aria-label":"Email address"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"password",value:c,onChange:a=>w(a.target.value),required:!0,placeholder:"Password",className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent text-sm","aria-label":"Password"})]}),e.jsx(i.button,{whileTap:{scale:.98},type:"submit",disabled:p,className:"w-full py-3 px-4 bg-black text-white font-semibold rounded-lg shadow hover:bg-gray-800 transition-colors disabled:bg-gray-400 flex items-center justify-center",children:p?e.jsx(C,{size:20,className:"animate-spin"}):t?"Login":"Sign Up"})]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),e.jsxs(i.button,{whileTap:{scale:.98},onClick:v,className:"w-full py-3 px-4 border border-gray-300 rounded-lg shadow-sm text-gray-700 font-medium hover:bg-gray-50 flex items-center justify-center gap-2 transition-colors",children:[e.jsx(_,{}),"Google"]}),e.jsxs("p",{className:"text-sm text-center text-gray-600",children:[t?"Don't have an account?":"Already have an account?",e.jsx("button",{onClick:()=>{f(!t),r(null)},className:"font-semibold text-black hover:underline ml-1",children:t?"Sign Up":"Login"})]})]})]})}export{$ as default};
