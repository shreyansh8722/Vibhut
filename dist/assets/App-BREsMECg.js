import{c as N,r as t,j as e,u as L,a as _,b as E,A as P,O as C}from"./index-fYIJ22hC.js";import{A as $}from"./index-BJlB8vhG.js";import{m as i}from"./proxy-Cxc5Icpb.js";import{H as A}from"./heart-DVpuXnrv.js";import{U as H}from"./user-xfePk0rJ.js";/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],S=N("compass",z);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],O=N("house",U),T=void 0,G=t.createContext(null);function I({children:p}){const[n,r]=t.useState(null),[w,l]=t.useState(null),[o,c]=t.useState(!1),[f,s]=t.useState(null),m=async(a,x)=>{var u,b;try{const g=await fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${a},${x}&key=${T}`);if(!g.ok)throw new Error("Failed to fetch address");const v=await g.json();if(v.status!=="OK")throw console.error("Geocoding API Error:",v.error_message),new Error(v.error_message||"Could not get address");const y=v.results[0];if(!y)throw new Error("No address found for coordinates");const j=(u=y.address_components.find(h=>h.types.includes("locality")||h.types.includes("sublocality")))==null?void 0:u.long_name,k=(b=y.address_components.find(h=>h.types.includes("administrative_area_level_2")||h.types.includes("postal_town")))==null?void 0:b.long_name;l(j&&k?`${j}, ${k}`:k||j||"Unknown Location")}catch(g){console.error(g),s("Could not get address")}finally{c(!1)}},d=t.useCallback(()=>{if(c(!0),s(null),l(null),!navigator.geolocation){s("Geolocation is not supported by your browser"),c(!1);return}navigator.geolocation.getCurrentPosition(a=>{const{latitude:x,longitude:u}=a.coords;r({lat:x,lng:u}),m(x,u)},a=>{s(a.message),c(!1)})},[]);return e.jsx(G.Provider,{value:{location:n,address:w,loading:o,error:f,requestLocation:d},children:p})}function q(){const p=L(),n=_(),{user:r}=E()||{},[w,l]=t.useState(!1);t.useEffect(()=>{let s=window.scrollY;const m=()=>{const d=window.scrollY,a=d>s&&d>80&&document.body.scrollHeight>window.innerHeight+100;l(a),s=d};return window.addEventListener("scroll",m,{passive:!0}),()=>window.removeEventListener("scroll",m)},[]);const o=p.pathname,f=["/","/explore","/favorites","/profile"].includes(o);return e.jsx(P,{children:e.jsxs(I,{children:[e.jsx($,{mode:"wait",children:e.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.18,ease:"easeOut"},className:`min-h-screen bg-white ${f?"pb-28":""}`,children:e.jsx(C,{})},p.pathname)}),f&&e.jsxs(i.nav,{initial:{y:100,opacity:0},animate:{y:w?100:0,opacity:w?0:1},transition:{type:"spring",stiffness:160,damping:20},className:"fixed bottom-5 left-1/2 -translate-x-1/2 w-[90%] max-w-[350px] bg-[#0f0f0f] text-white rounded-full flex justify-around items-center px-4 py-3 shadow-2xl backdrop-blur-md z-50",children:[e.jsx(i.button,{whileTap:{scale:.9},onClick:()=>n("/"),className:`p-2 rounded-full ${o==="/"?"bg-white text-black":"text-white/80 hover:bg-white/10 hover:text-white"}`,"aria-label":"Home",children:e.jsx(O,{size:22})}),e.jsx(i.button,{whileTap:{scale:.9},onClick:()=>n("/explore"),className:`p-2 rounded-full ${o==="/explore"?"bg-white text-black":"text-white/80 hover:bg-white/10 hover:text-white"}`,"aria-label":"Explore",children:e.jsx(S,{size:22})}),e.jsx(i.button,{whileTap:{scale:.9},onClick:()=>n("/favorites"),className:`p-2 rounded-full ${o==="/favorites"?"bg-white text-black":"text-white/80 hover:bg-white/10 hover:text-white"}`,"aria-label":"Favorites",children:e.jsx(A,{size:22})}),e.jsx(i.button,{whileTap:{scale:.9},onClick:()=>n("/profile"),className:`p-2 rounded-full ${o==="/profile"?"bg-white text-black":"text-white/80 hover:bg-white/10 hover:text-white"}`,"aria-label":"Profile",children:r!=null&&r.photoURL?e.jsx("img",{src:r.photoURL,alt:"Profile",className:"w-6 h-6 rounded-full object-cover"}):e.jsx(H,{size:22})})]})]})})}export{q as default};
