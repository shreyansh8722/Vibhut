import{c as G,n as Q,a as T,r as l,j as s,o as $,i as B,e as u,R as L,_ as A,g as I,x as P,k as z,h as J,d as E,F as O}from"./index-fYIJ22hC.js";import{A as W}from"./arrow-left-C7VSTNop.js";import{M as R}from"./map-pin-DDqji2Q-.js";import{m as H}from"./proxy-Cxc5Icpb.js";import{S as K}from"./star-B-XdTAma.js";/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],X=G("link",V),M=()=>s.jsxs("div",{className:"flex gap-4 p-2 animate-pulse",children:[s.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-xl flex-shrink-0"}),s.jsxs("div",{className:"flex-1 space-y-2 py-1",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/4"})]})]}),Y=()=>s.jsxs("div",{className:"min-h-screen bg-white animate-pulse",children:[s.jsx("div",{className:"h-48 bg-gray-200 relative",children:s.jsx("div",{className:"absolute top-4 left-4 w-10 h-10 bg-gray-300 rounded-full"})}),s.jsxs("div",{className:"p-6 -mt-20",children:[s.jsxs("div",{className:"flex items-end gap-4",children:[s.jsx("div",{className:"w-32 h-32 rounded-full bg-gray-300 border-4 border-white"}),s.jsxs("div",{className:"flex-1 mb-4 space-y-2",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"})]})]}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mt-4"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6 mt-2"}),s.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mt-10 mb-4"}),s.jsx(M,{}),s.jsx(M,{})]})]}),Z=l.memo(({spot:a,navigate:c})=>{var e;return s.jsxs(H.div,{initial:{opacity:0},animate:{opacity:1},whileTap:{scale:.99},onClick:()=>c(`/spot/${a.id}`),className:"flex items-center gap-4 p-2 -m-2 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors",children:[s.jsx("img",{src:a.featuredImageUrl||((e=a.imageUrls)==null?void 0:e[0])||"https://placehold.co/100x100",alt:a.name,loading:"lazy",className:"w-24 h-24 rounded-xl object-cover flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-base font-semibold text-gray-900",children:a.name}),s.jsx("p",{className:"text-sm text-gray-500 capitalize",children:a.category||"Spot"}),s.jsxs("div",{className:"flex items-center gap-2 mt-1 text-sm text-gray-600",children:[s.jsx(R,{className:"w-3 h-3"}),s.jsx("span",{children:a.city||"Jaipur"}),s.jsx("span",{className:"text-gray-300",children:"|"}),s.jsx(K,{className:"w-3 h-3 text-yellow-500"}),s.jsx("span",{children:a.averageRating||"N/A"})]})]})]})});function rs(){var w,S;const{ambassadorId:a}=Q(),c=T(),[e,D]=l.useState(null),[d,b]=l.useState([]),[_,f]=l.useState(!0),[j,m]=l.useState(null),[x,N]=l.useState(!1),[y,h]=l.useState(null),[g,v]=l.useState(!1),i=5;l.useEffect(()=>{(async()=>{f(!0),m(null);try{const t=B(u,"ambassadors",a),p=L(A(u,"spots"),I("ambassadorId","==",a),P("name"),z(i)),[r,n]=await Promise.all([J(t),E(p)]);if(!r.exists())throw new Error("Ambassador not found");const q={id:r.id,...r.data()};D(q);const F=n.docs.map(k=>({id:k.id,...k.data()}));b(F),n.docs.length<i?v(!0):h(n.docs[n.docs.length-1])}catch(t){console.error(t),m(t.message)}finally{f(!1)}})()},[a]);const C=async()=>{if(!(x||g||!y)){N(!0);try{const o=L(A(u,"spots"),I("ambassadorId","==",a),P("name"),O(y),z(i)),t=await E(o),p=t.docs.map(r=>({id:r.id,...r.data()}));b(r=>[...r,...p]),t.docs.length<i?(v(!0),h(null)):h(t.docs[t.docs.length-1])}catch(o){console.error("Error loading more spots:",o),m("Could not load more spots.")}finally{N(!1)}}};if(_)return s.jsx(Y,{});if(j)return s.jsx("div",{className:"text-center text-red-500 mt-10",children:j});if(!e)return null;const U=(w=e.socials)!=null&&w.startsWith("http")?e.socials:`https://instagram.com/${(S=e.socials)==null?void 0:S.replace("@","")}`;return s.jsxs("div",{className:"min-h-screen bg-white",children:[s.jsxs("div",{className:"relative h-48",children:[s.jsx("img",{src:e.profileImageUrl||"/avatar-placeholder.png",alt:"","aria-hidden":"true",className:"absolute inset-0 w-full h-full object-cover filter blur-lg scale-110 opacity-60"}),s.jsx("div",{className:"absolute inset-0 bg-black/10"}),s.jsx("div",{className:"absolute top-4 left-4",children:s.jsx("button",{onClick:()=>c(-1),className:"bg-white/80 backdrop-blur-sm p-2 rounded-full shadow-md z-10","aria-label":"Go back",children:s.jsx(W,{size:20,className:"text-gray-800"})})})]}),s.jsxs("div",{className:"p-6 -mt-20 relative z-10",children:[s.jsx("div",{className:"flex items-end gap-4",children:s.jsx("img",{src:e.profileImageUrl||"https://placehold.co/128x128",alt:e.name,className:"w-32 h-32 rounded-full border-4 border-white shadow-lg object-cover"})}),s.jsx("h1",{className:"text-3xl font-bold mt-4",children:e.name}),s.jsxs("a",{href:U,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-lg flex items-center gap-1.5",children:[s.jsx(X,{size:16}),e.socials||"Social"]}),s.jsx("p",{className:"text-gray-700 my-4",children:e.bio}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[s.jsx(R,{size:16}),"Based in ",e.cityId||"India"]})]}),s.jsxs("div",{className:"p-6 pt-0",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Suggestions by ",e.name.split(" ")[0]]}),d.length>0?s.jsxs("div",{className:"flex flex-col gap-5",children:[d.map(o=>s.jsx(Z,{spot:o,navigate:c},o.id)),s.jsxs("div",{className:"mt-4 text-center",children:[!g&&s.jsx("button",{onClick:C,disabled:x,className:"bg-black text-white px-6 py-2.5 rounded-full font-medium transition-opacity hover:opacity-80 disabled:opacity-50 disabled:cursor-wait",children:x?s.jsx($,{size:20,className:"animate-spin"}):"Load More"}),g&&d.length>i&&s.jsx("p",{className:"text-gray-500",children:"No more suggestions"})]})]}):s.jsxs("p",{className:"text-gray-500",children:[e.name," hasn't suggested any spots yet."]})]})]})}export{rs as default};
